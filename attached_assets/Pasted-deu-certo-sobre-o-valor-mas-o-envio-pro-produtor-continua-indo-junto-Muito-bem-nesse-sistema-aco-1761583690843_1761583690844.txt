deu certo sobre o valor, mas o envio pro produtor, continua indo junto. Muito bem, nesse sistema acontece o seguinte, um pedido pode ter mais de um produtor. Quando o pedido vai pra logistica, se tiver mais de um produtor, eu tenho que poder enviar a ordem de servi√ßo separada pra cada produtor. O que acontece hoje √© que ele separa por pordutor no painel, porem quando eu clico em 1 bot√£o de 1 produtor, automaticamente ele clica todos os botoes e acaba enviando pra 1 produtor s√≥. O correto √© , 1 bot√£o por vez, a instancia ta errada. ele clica tudo junto e ainda nao distribui certo. identifique pra mim onde esta o erro. Veja em routes, storeage, logistic , o erro esta por ai. D√©bora, achei o problema.

Onde est√° o erro

Est√° no front, em client/src/pages/logistics/dashboard.tsx.
Voc√™ usa uma √∫nica useMutation (sendToProductionMutation) para todos os bot√µes ‚ÄúEnviar para produ√ß√£o‚Äù. O estado global isPending dessa mutation √© lido por todos os bot√µes; quando voc√™ clica em um, todos entram em ‚ÄúEnviando‚Ä¶‚Äù, parecendo que todos foram clicados. Isso explica o ‚Äúclica tudo junto‚Äù.

O back-end (em server/routes.ts, rota POST /api/orders/:id/send-to-production) est√° OK: ele respeita producerId quando enviado e cria uma OP por produtor. Em server/storage.ts a cria√ß√£o da OP (createProductionOrder) tamb√©m est√° correta.

Corre√ß√£o m√≠nima (2 linhas + 1 condi√ß√£o)

Ainda usando a mesma mutation, restrinja o ‚Äúpending‚Äù ao bot√£o da dupla (orderId, producerId) que voc√™ clicou:

// perto do bot√£o "Enviar APENAS para ..."
const isSendingThis =
sendToProductionMutation.isPending &&
sendToProductionMutation.variables?.orderId === order.id &&
sendToProductionMutation.variables?.producerId === order.currentProducerId;

<Button
onClick={() =>
sendToProductionMutation.mutate({
orderId: order.id,
producerId: order.currentProducerId!,
})
}
disabled={isSendingThis}
title={Enviar APENAS para ${order.currentProducerName}}

{isSendingThis ? 'Enviando...' : üì§ ${order.currentProducerName}}
</Button>

E para o bot√£o ‚ÄúEnviar (todos os produtores)‚Äù use outra flag:

const isSendingAll =
sendToProductionMutation.isPending &&
sendToProductionMutation.variables?.orderId === selectedOrder?.id &&
!sendToProductionMutation.variables?.producerId; - veja ai o que consegue resolver