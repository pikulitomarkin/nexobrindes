D√©bora, achei o problema.

Onde est√° o erro

Est√° no front, em client/src/pages/logistics/dashboard.tsx.
Voc√™ usa uma √∫nica useMutation (sendToProductionMutation) para todos os bot√µes ‚ÄúEnviar para produ√ß√£o‚Äù. O estado global isPending dessa mutation √© lido por todos os bot√µes; quando voc√™ clica em um, todos entram em ‚ÄúEnviando‚Ä¶‚Äù, parecendo que todos foram clicados. Isso explica o ‚Äúclica tudo junto‚Äù.

O back-end (em server/routes.ts, rota POST /api/orders/:id/send-to-production) est√° OK: ele respeita producerId quando enviado e cria uma OP por produtor. Em server/storage.ts a cria√ß√£o da OP (createProductionOrder) tamb√©m est√° correta.

Corre√ß√£o m√≠nima (2 linhas + 1 condi√ß√£o)

Ainda usando a mesma mutation, restrinja o ‚Äúpending‚Äù ao bot√£o da dupla (orderId, producerId) que voc√™ clicou:

// perto do bot√£o "Enviar APENAS para ..."
const isSendingThis =
  sendToProductionMutation.isPending &&
  sendToProductionMutation.variables?.orderId === order.id &&
  sendToProductionMutation.variables?.producerId === order.currentProducerId;

<Button
  onClick={() =>
    sendToProductionMutation.mutate({
      orderId: order.id,
      producerId: order.currentProducerId!,
    })
  }
  disabled={isSendingThis}
  title={`Enviar APENAS para ${order.currentProducerName}`}
>
  {isSendingThis ? 'Enviando...' : `üì§ ${order.currentProducerName}`}
</Button>


E para o bot√£o ‚ÄúEnviar (todos os produtores)‚Äù use outra flag:

const isSendingAll =
  sendToProductionMutation.isPending &&
  sendToProductionMutation.variables?.orderId === selectedOrder?.id &&
  !sendToProductionMutation.variables?.producerId;

Corre√ß√£o robusta (recomendada)

Extraia o bot√£o para um componente de linha com sua pr√≥pria useMutation (cada linha tem seu pending isolado):

function SendToProducerButton({ orderId, producerId, label }: { orderId: string; producerId: string; label: string }) {
  const { mutate, isPending } = useMutation({
    mutationFn: async () => {
      const r = await fetch(`/api/orders/${orderId}/send-to-production`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ producerId }),
      });
      if (!r.ok) throw new Error((await r.json()).error || 'Erro ao enviar');
      return r.json();
    },
  });

  return (
    <Button onClick={() => mutate()} disabled={isPending}>
      {isPending ? 'Enviando...' : `üì§ ${label}`}
    </Button>
  );
}


Use esse componente dentro do map de produtores. Assim cada bot√£o tem ‚Äúinst√¢ncia‚Äù pr√≥pria e n√£o contamina os demais.

Dois checks r√°pidos (para o ‚Äún√£o distribui certo‚Äù)

Payload: ao clicar em um produtor, o Network do navegador deve mostrar POST /api/orders/:id/send-to-production com {"producerId":"<id_do_produtor>"}.

Itens sem produtor: a rota ignora itens com producerId ausente ou 'internal'. Se algum item ficar assim, ele n√£o gera OP (isso √© esperado).

Se quiser, eu j√° te devolvo o trecho de dashboard.tsx revisado com o componente isolado.